<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <title>OPENCORE Share Viewer</title>
    <style>
      body {
        margin: 0;
        font-family: "Space Grotesk", system-ui, sans-serif;
        background: #05060f;
        color: #f5f7ff;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem;
      }
      .card {
        background: rgba(9, 12, 25, 0.9);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 24px;
        padding: 2rem;
        width: min(900px, 100%);
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.45);
      }
      h1 {
        margin-top: 0;
        font-size: 2rem;
      }
      pre {
        background: rgba(14, 18, 40, 0.9);
        border-radius: 16px;
        padding: 1rem;
        max-height: 420px;
        overflow: auto;
        font-family: "Space Mono", monospace;
        font-size: 0.9rem;
      }
      .meta {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 1.5rem;
        font-size: 0.95rem;
        color: rgba(255, 255, 255, 0.8);
      }
      a {
        color: #4dfdc7;
      }
    </style>
  </head>
  <body data-share-id="{{SHARE_ID}}">
    <div class="card">
      <p style="text-transform: uppercase; letter-spacing: 0.15em; color: #49f6aa">ottcouture.eu · OPENCORE</p>
      <h1>Geteilter Analyzer-Report</h1>
      <div class="meta" id="share-meta">Share-ID: {{SHARE_ID}}</div>
      <pre id="share-output">Report wird geladen …</pre>
      <p>
        Feedback oder Support: otcdmin@outlook.com · Instagram <a href="https://instagram.com/ottcouture.eu">@ottcouture.eu</a>
        · Discord <a href="https://discord.gg/GMMSqePfPh">discord.gg/GMMSqePfPh</a>
      </p>
    </div>
    <script>
      (async () => {
        const container = document.body;
        const shareId = container.dataset.shareId;
        const pre = document.getElementById("share-output");
        const meta = document.getElementById("share-meta");
        try {
          const response = await fetch(`/api/opencore/share/${shareId}`);
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          const payload = await response.json();
          const modelName = payload?.payload?.teachable_model?.name || "OPENCORE";
          meta.textContent = `Share-ID: ${shareId} · Modell: ${modelName}`;
          pre.textContent = JSON.stringify(payload.payload, null, 2);
        } catch (error) {
          meta.textContent = `Share-ID: ${shareId}`;
          pre.textContent = `Fehler beim Laden des Reports: ${error}`;
        }
      })();
    </script>
  </body>
</html>
